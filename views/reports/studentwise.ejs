<% include ../partials/header %>
		
	<div class="card">
		<div class="card-header">
			<h2 class="text-center"><%= title %></h2>
		</div>
		<div class="card-body">
			
			<form method="POST" action="/reports/studentwise" class="form-group">
				
				<div class="row">
					<label for="batch" class="col-form-label col-md-2 offset-md-3 text-md-right">Batch: </label>
					<select class="form-control col-md-3" id="batch" name="batch">
						<option value="2013-2017" <% if (typeof batch_selected !== 'undefined') { %> <% if(batch_selected == "2013-2017") { %> selected <% } %> <% } %>>2013-2017</option>
						<option value="2014-2018" <% if (typeof batch_selected !== 'undefined') { %> <% if(batch_selected == "2014-2018") { %> selected <% } %> <% } %>>2014-2018</option>
						<option value="2015-2019" <% if (typeof batch_selected !== 'undefined') { %> <% if(batch_selected == "2015-2019") { %> selected <% } %> <% } %>>2015-2019</option>
						<option value="2016-2020" <% if (typeof batch_selected !== 'undefined') { %> <% if(batch_selected == "2016-2020") { %> selected <% } %> <% } %>>2016-2020</option>
						<option value="2017-2021" <% if (typeof batch_selected !== 'undefined') { %> <% if(batch_selected == "2017-2021") { %> selected <% } %> <% } %>>2017-2021</option>
						<option value="2018-2022" <% if (typeof batch_selected !== 'undefined') { %> <% if(batch_selected == "2018-2022") { %> selected <% } %> <% } %>>2018-2022</option>
						<option value="2019-2023" <% if (typeof batch_selected !== 'undefined') { %> <% if(batch_selected == "2019-2023") { %> selected <% } %> <% } %>>2019-2023</option>
						<option value="2020-2024" <% if (typeof batch_selected !== 'undefined') { %> <% if(batch_selected == "2020-2024") { %> selected <% } %> <% } %>>2020-2024</option>
						<option value="2021-2025" <% if (typeof batch_selected !== 'undefined') { %> <% if(batch_selected == "2021-2025") { %> selected <% } %> <% } %>>2021-2025</option>
					</select>
				</div>
				<br>
				<br>
				<div class="row">
					<label for="student" class="col-form-label col-md-2 text-md-right">Student: </label>
					<select class="form-control col-md-3" id="student" name="student">
							<option value="">Select Student</option>
					</select>

					<label for="semester" class="col-form-label col-md-2 text-md-right">Semester: </label>
					<select class="form-control col-md-3" id="semester" name="semester">
						<option value="1" <% if (typeof semester_selected !== 'undefined') { %> <% if(semester_selected == 1) { %> selected <% } %> <% } %>>1st</option>
						<option value="2" <% if (typeof semester_selected !== 'undefined') { %> <% if(semester_selected == 2) { %> selected <% } %> <% } %>>2nd</option>
						<option value="3" <% if (typeof semester_selected !== 'undefined') { %> <% if(semester_selected == 3) { %> selected <% } %> <% } %>>3rd</option>
						<option value="4" <% if (typeof semester_selected !== 'undefined') { %> <% if(semester_selected == 4) { %> selected <% } %> <% } %>>4th</option>
						<option value="5" <% if (typeof semester_selected !== 'undefined') { %> <% if(semester_selected == 5) { %> selected <% } %> <% } %>>5th</option>
						<option value="6" <% if (typeof semester_selected !== 'undefined') { %> <% if(semester_selected == 6) { %> selected <% } %> <% } %>>6th</option>
						<option value="7" <% if (typeof semester_selected !== 'undefined') { %> <% if(semester_selected == 7) { %> selected <% } %> <% } %>>7th</option>
						<option value="8" <% if (typeof semester_selected !== 'undefined') { %> <% if(semester_selected == 8) { %> selected <% } %> <% } %>>8th</option>
					</select>
				</div>

				<br>

				<input type="submit" value="Submit" class="btn btn-success col-md-2 offset-md-5">

			</form>

		</div>
	</div>

	<% if(typeof student_selected !== 'undefined') { %>

		<div class="card">
			<div class="card-header">
				<h2 class="text-center">Results <%= student_selected %></h2>
			</div>
			<div class="card-body">
				<table class="table table-bordered">
					<thead class="thead-dark">
						<tr>
							<th>Program Outcome</th>
							<th>Score</th>
						</tr>
					</thead>
					<tbody class="tbody-light">
						<tr>
							<td>PO1</td>
							<td><%= PO1 %></td>
						</tr>
						<tr>
							<td>PO2</td>
							<td><%= PO2 %></td>
						</tr>
						<tr>
							<td>PO3</td>
							<td><%= PO3 %></td>
						</tr>
						<tr>
							<td>PO4</td>
							<td><%= PO4 %></td>
						</tr>
						<tr>
							<td>PO5</td>
							<td><%= PO5 %></td>
						</tr>
						<tr>
							<td>PO6</td>
							<td><%= PO6 %></td>
						</tr>
						<tr>
							<td>PO7</td>
							<td><%= PO7 %></td>
						</tr>
						<tr>
							<td>PO8</td>
							<td><%= PO8 %></td>
						</tr>
						<tr>
							<td>PO9</td>
							<td><%= PO9 %></td>
						</tr>
						<tr>
							<td>PO10</td>
							<td><%= PO10 %></td>
						</tr>
						<tr>
							<td>PO11</td>
							<td><%= PO11 %></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

	<% } %>

<% include ../partials/footer %>

<script type="text/javascript">

	$('#batch').change(function() {
		var selected = $(this).find(':selected').text();
		console.log(selected);
		$.ajax({
            type: "POST",
            url:"http://127.0.0.1:8000/reports/studentwise/getstudents",
			dataType: "json",
			data: {
				batch: selected
			},
            	success: function (data) {
				console.log(data.students);
				$.each(data.students, function(key, val) {
					//console.log(val.name);
					var div_data="<option value="+val.id+">"+val.roll+" - "+val.name+"</option>";
					console.log(div_data);
					$(div_data).appendTo('#student'); 
				});  
			}
		 	
		});
	});
	function getstudents(batch) {
		console.log(batch);
	}

</script>